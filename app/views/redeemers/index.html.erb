<h1>Redeemers#index</h1>
<div ng-controller="RedeemerController">
  <div>
    <redeemable></redeemable>
  </div>

  <!-- <h1>Available Redeemable Transactions</h1> -->
  <div ng-repeat="transaction in transactions | filter: {trans_type: 'redeemable'} | filter: {selected: false}">
    <div>
    <a href="" ng-click="select()">Select </a>
      {{transaction.address}}, {{transaction.city}}:
      Plastic: {{transaction.plastic}}
      Cans: {{transaction.cans}}
      Glass: {{transaction.glass}}
      Mixed Hi5: {{transaction.other}}
      Posted: {{transaction.created_at | date:'MM/dd h:mm' }}
    </div>
  </div>
  <%# @redeemables.each do |redeemable|  %>
    <!-- <div> -->
      <%#= form_for redeemable do |f| %>
      <!-- <div class="redeemable"> -->
        <%#= f.submit "Select", class: 'btn btn-link' %>
        <%#= f.hidden_field :selected, :value => true %>
        <%#= f.hidden_field :selected_date, :value => Time.now %>
        <%#= f.hidden_field :selected_redeemer_id, :value => current_user.id %>
        <!-- <%#= redeemable.users[0].profile.address %>, -->
        <!-- <%#= redeemable.users[0].profile.city %>: -->
        <%#= "Plastic: #{redeemable["plastic"]}" %>
        <%#= "Glass: #{redeemable["glass"]}" %>
        <%#= "Cans: #{redeemable["cans"]}" %>
        <%#= "Mixed Hi5: #{redeemable["other"]}" %>
        <%#= "Posted: #{redeemable["created_at"].to_formatted_s(:short)}" %>
      <!-- </div> -->
      <%# end %>
    <!-- </div> -->
  <%# end %>
  <div>
    <samaritan></samaritan>
  </div>
  <!-- <h1>Available Good Samaritan Transactions</h1> -->
  <div ng-repeat="transaction in transactions | filter: {trans_type: 'samaritan'} | filter: {selected: false}">
    <div>
      <a href="" ng-click="select()">Select </a>
      {{transaction.address}}, {{transaction.city}}:
      <span ng-show="transaction.cardboard" >cardboard</span>
      <span ng-show="transaction.newspaper" >newspaper</span>
      <span ng-show="transaction.magazines" >magazines</span>
      <span ng-show="transaction.paper" >paper</span>
      <span ng-show="transaction.non_hi5_plastic" >non_hi5_plastic</span>
      <span ng-show="transaction.non_hi5_glass" >non_hi5_glass</span>
      <span ng-show="transaction.non_hi5_cans" >non_hi5_cans</span>
      Posted: {{transaction.created_at | date:'MM/dd h:mm' }}
    </div>
  </div>
  <%# @samaritans.each do |samaritan| %>
    <!-- <div> -->
      <%#= form_for samaritan do |f| %>
      <!-- <div class="samaritan"> -->
        <%#= f.submit "Select", class: 'btn btn-link' %>
        <%#= f.hidden_field :selected, :value => true %>
        <%#= f.hidden_field :selected_date, :value => Time.now %>
        <%#= f.hidden_field :selected_redeemer_id, :value => current_user.id %>
        <!-- <%#= samaritan.users[0].profile.address %>, -->
        <!-- <%#= samaritan.users[0].profile.city %>: -->
        <%#= "Cardboard" if samaritan["cardboard"] == true %>
        <%#= "Newspaper" if samaritan["newspaper"] == true %>
        <%#= "Magazines" if samaritan["magazines"] == true %>
        <%#= "Paper" if samaritan["paper"] == true %>
        <%#= "Non_hi5_plastic" if samaritan["non_hi5_plastic"] == true %>
        <%#= "Non_hi5_glass" if samaritan["non_hi5_glass"] == true %>
        <%#= "Non_hi5_cans" if samaritan["non_hi5_cans"] == true %>
        <%#= "Posted: #{samaritan["created_at"].to_formatted_s(:short)}" %>
      <!-- </div> -->
      <%# end %>
    <!-- </div> -->
  <%# end %>
  <div>
    <redeemableselected></redeemableselected>
  </div>
  <!-- <h1>Selected Redeemable Transactions</h1> -->
  <div ng-repeat="transaction in transactions | filter: {trans_type: 'redeemable'} | filter: {selected: true, completed: false}">
    <div>
      {{transaction.address}}, {{transaction.city}}:
      Plastic: {{transaction.plastic}}
      Cans: {{transaction.cans}}
      Glass: {{transaction.glass}}
      Mixed Hi5: {{transaction.other}}
      Posted: {{transaction.created_at | date:'MM/dd h:mm' }}
      <a href="" ng-click="completed()"> Completed </a>
    </div>
  </div>
  <%# @redeemables_selected.each do |redeemable|  %>
    <!-- <div> -->
      <%#= form_for redeemable do |f| %>
        <!-- <div class="redeemable"> -->
          <!-- <%#= redeemable["address"] %>, -->
          <!-- <%#= redeemable["city"] %>: -->
          <%#= "Plastic: #{redeemable["plastic"]}" if redeemable["plastic"] %>
          <%#= "Glass: #{redeemable["glass"]}" if redeemable["glass"] %>
          <%#= "Cans: #{redeemable["cans"]}" if redeemable["cans"]%>
          <%#= "Mixed Hi5: #{redeemable["other"]}" if redeemable["other"] %>
          <%#= "Selected: #{redeemable["selected_date"].to_datetime.to_formatted_s(:short)}" %>
          <%#= f.submit "Completed", class: 'btn btn-link' %>
          <%#= f.hidden_field :selected, :value => true %>
          <%#= f.hidden_field :completed, :value => true %>
          <%#= f.hidden_field :completed_date, :value => Time.now %>
        <!-- </div> -->
      <%# end %>
    <!-- </div> -->
  <%# end %>

  <div>
    <samaritanselected></samaritanselected>
  </div>
  <!-- <h1>Selected Good Samaritan Transactions</h1> -->
  <div ng-repeat="transaction in transactions | filter: {trans_type: 'samaritan'} | filter: {selected: true, completed: false}">
    <div>
      {{transaction.address}}, {{transaction.city}}:
      <span ng-show="transaction.cardboard" >cardboard</span>
      <span ng-show="transaction.newspaper" >newspaper</span>
      <span ng-show="transaction.magazines" >magazines</span>
      <span ng-show="transaction.paper" >paper</span>
      <span ng-show="transaction.non_hi5_plastic" >non_hi5_plastic</span>
      <span ng-show="transaction.non_hi5_glass" >non_hi5_glass</span>
      <span ng-show="transaction.non_hi5_cans" >non_hi5_cans</span>
      Posted: {{transaction.created_at | date:'MM/dd h:mm' }}
      <a href="" ng-click="completed()"> Completed </a>
    </div>
  </div>
  <%# @samaritans_selected.each do |samaritan| %>
    <!-- <div> -->
      <%#= form_for samaritan do |f| %>
        <!-- <div class="samaritan"> -->
          <!-- <%#= samaritan["address"] %>, -->
          <!-- <%#= samaritan["city"] %>: -->
          <%#= "Cardboard" if samaritan["cardboard"] %>
          <%#= "Newspaper" if samaritan["newspaper"] %>
          <%#= "Magazines" if samaritan["magazines"] %>
          <%#= "Paper" if samaritan["paper"] %>
          <%#= "Non_hi5_plastic" if samaritan["non_hi5_plastic"] %>
          <%#= "Non_hi5_glass" if samaritan["non_hi5_glass"] %>
          <%#= "Non_hi5_cans" if samaritan["non_hi5_cans"] %>
          <%#= "Selected: #{samaritan["selected_date"].to_datetime.to_formatted_s(:short)}" %>
          <%#= f.submit "Completed", class: 'btn btn-link' %>
          <%#= f.hidden_field :selected, :value => true %>
          <%#= f.hidden_field :completed, :value => true %>
          <%#= f.hidden_field :completed_date, :value => Time.now %>
        <!-- </div> -->
      <%# end %>
    <!-- </div> -->
  <%# end %>

  <input type="hidden" id="center_latitude" value="<%= current_user.profile.latitude %>" />
  <input type="hidden" id="center_longitude" value="<%= current_user.profile.longitude %>" />
  <input type="hidden" id="current_user_id" value="<%= current_user.id %>" />
  <div id="map-canvas"></div>
</div><!-- ng-controller -->
